% for node 1 
r(10).
b(10) :- r(10), not r(130).
b(130) :- r(130).
r(130) :- b(30).

% for node 2
r(20).
b(20) :- r(20), not r(210).
b(210) :- r(210).
r(210) :- b(10).

% for node 3
r(30).
b(30) :- r(30), not r(3420).
b(3420) :- r(3420).
r(3420) :- b(420).

% for node 4
b(420) :- r(420).
b(430) :- r(430), not r(420).
r(420) :- b(20).
r(430) :- b(30).

#show r/1. 
#show b/1.